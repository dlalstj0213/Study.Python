# 파이썬 coroutine

파이썬 코루틴은 시간이 오래걸리는 작업을 분할해서 사용하는데 사용되며  
주로 파일 처리, 네트워크 처리 등에 활용이된다.

## 일반적인 메인 루틴과 서브 루틴의 관계

```python
# 서브 루틴 ###########
def add(a, b):
  c = a + b
  print('add 함수')
######################

# 메인 루틴 ###########
def calc():
  add(1, 2)
  print('calc 함수')

calc()
######################
```

- 메인 루틴에서 서브 루틴을 호출하면 서브 루틴의 코드를 실행한 뒤 다시 메인 루틴으로 돌아옴
- 서브 루틴이 끝나면 서브 루틴의 내용은 모두 사라짐
- 서브 루틴은 메인 루틴에 종속된 관계임

## 메인 루틴과 코루틴의 관계

- 코루틴은 방식이 조금 다른게 코루틴(coroutine)은 cooperative routine을 의미하는데 서로 협력하는 루틴이라는 뜻임
- 메인 루틴과 서브 루틴처럼 종속된 관계가 아니라 서로 대등한 관계이며 특정 시점에 상대방의 코드를 실행함
- 코루틴은 함수가 종료되지 않은 상태에서 메인 루틴의 코드를 실행한 뒤 다시 돌아와서 코루틴의 코드를 실행함
- 코루틴이 종료되지 않는다면 코루틴의 내용도 계속 유지됨
- 일반 함수를 호출하면 코드를 한 번만 실행 할 수 있지만, 코루틴은 코드를 여러 번 실행할 수 있음
- 참고로 함수의 코드를 실행하는 지점은 진입점(entry point)이라고 하는데, 코루틴은 진입점이 여러 개인 함수임

## 코루틴 주요 키워드

- `코루틴객체.next()`
- `코르틴객체.send(값)`
- `변수 = (yield)`
